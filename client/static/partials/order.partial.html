<h2>Orders</h2>

<h3>Add a new order</h3>
<div class="row new_order">
	<div class="col-xs-4">
		<h4>Customer Name:</h4>
		<select ng-model="newOrder.name" ng-init="newOrder.name==users[0].name" ng-options="user as user.name for user in users">
			<option></option>
		</select>
	</div>
	<div class="col-xs-4">
		<h4>Quantity</h4>
		<input type="number" ng-model="newOrder.qty" min="1" ng-init="newOrder.qty=1">
        <select ng-model="newOrder.product" ng-init="newOrder.product=products[0].name" ng-options="product as product.name for product in products">
        </select>
        <div ng-show='qty_error'>{{qty_msg}}</div>
    </div>
        <button class="btn btn-primary" ng-click="addOrder(newOrder)">Order</button>
</div>

<div class="row order_search">
	<input type="text" ng-model="filter_name" class="col-xs-4 col-xs-offset-7" placeholder="Search for an order...">
</div>

<div class="row">
	<div class="col-xs-12">
		<table class='table table-striped table-bordered'>
            <thead>
                <tr>
                    <th>Customer Name</th>
                    <th>Product</th>
                    <th>Quantity</th>
                    <th>Date</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="order in orders | filter: filter_name track by $index">
                    <td>{{ order.name }}</td>
                    <td>{{ order.product }}</td>
                    <td>{{ order.qty }}</td>
                    <td>{{ order.created_at | date: 'MMMM d, yyyy' }}</td>
                </tr>
            </tbody>
        </table>
	</div>
</div>